<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Low-pass filtering · ParticleHolography.jl</title><meta name="title" content="Low-pass filtering · ParticleHolography.jl"/><meta property="og:title" content="Low-pass filtering · ParticleHolography.jl"/><meta property="twitter:title" content="Low-pass filtering · ParticleHolography.jl"/><meta name="description" content="Documentation for ParticleHolography.jl."/><meta property="og:description" content="Documentation for ParticleHolography.jl."/><meta property="twitter:description" content="Documentation for ParticleHolography.jl."/><meta property="og:url" content="https://dainakai.github.io/ParticleHolography.jl/usage/lowpassfilter/"/><meta property="twitter:url" content="https://dainakai.github.io/ParticleHolography.jl/usage/lowpassfilter/"/><link rel="canonical" href="https://dainakai.github.io/ParticleHolography.jl/usage/lowpassfilter/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/styles.css" rel="stylesheet" type="text/css"/><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="ParticleHolography.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ParticleHolography.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../whats_inline_holography/">What&#39;s inline holography?</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/gabor/">Gabor holography</a></li><li><a class="tocitem" href="../../tutorials/pr/">Phase retrieval holography</a></li><li><a class="tocitem" href="../../tutorials/particle/">Particle handling</a></li></ul></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../preprocessings/">Preprocessings</a></li><li><a class="tocitem" href="../reconstruction/">Volume reconstruction</a></li><li class="is-active"><a class="tocitem" href>Low-pass filtering</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Implementation"><span>Implementation</span></a></li><li><a class="tocitem" href="#Example"><span>Example</span></a></li><li><a class="tocitem" href="#References"><span>References</span></a></li></ul></li><li><a class="tocitem" href="../animplot/">Animated plots</a></li></ul></li><li><a class="tocitem" href="../../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Usage</a></li><li class="is-active"><a href>Low-pass filtering</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Low-pass filtering</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/dainakai/ParticleHolography.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/dainakai/ParticleHolography.jl/blob/main/docs/src/usage/lowpassfilter.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Low-pass-filtering"><a class="docs-heading-anchor" href="#Low-pass-filtering">Low-pass filtering</a><a id="Low-pass-filtering-1"></a><a class="docs-heading-anchor-permalink" href="#Low-pass-filtering" title="Permalink"></a></h1><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>In [<a href="#fugal">16</a>] and other works, applying a low-pass filter to holograms is used to reduce phase distribution errors and artifacts, as well as to homogenize the reconstructed image. Furthermore, by limiting the bandwidth more strictly than the necessary and sufficient range to suppress phase undersampling, it is possible to reduce position detection errors caused by particle image elongation. Conversely, the increase in brightness of the bright-field reconstructed image due to the low-pass filter can make it difficult to determine the threshold for binarization and complicate particle size evaluation. While the effects of low-pass filtering have both advantages and disadvantages, it is often beneficial for improving certain metrics.</p><h2 id="Implementation"><a class="docs-heading-anchor" href="#Implementation">Implementation</a><a id="Implementation-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation" title="Permalink"></a></h2><p>A low-pass filter can be applied to the Fourier domain of a hologram (treated as a <a href="../../reference/#ParticleHolography.CuWavefront"><code>CuWavefront</code></a> structure) by taking the Hadamard product with a <code>NormedFloat</code> array of the same shape (see <a href="../../reference/#ParticleHolography.cu_apply_low_pass_filter!-Tuple{CuWavefront, CuLowPassFilter}"><code>cu_apply_low_pass_filter!</code></a> and <a href="../../reference/#ParticleHolography.cu_apply_low_pass_filter-Tuple{CuWavefront, CuLowPassFilter}"><code>cu_apply_low_pass_filter</code></a>). In ParticleHolography.jl, low-pass filters are defined by the <a href="../../reference/#ParticleHolography.CuLowPassFilter"><code>CuLowPassFilter</code></a> structure, which is defined on the GPU device. By default, a rectangular window low-pass filter <a href="../../reference/#ParticleHolography.cu_rectangle_filter-Tuple{AbstractFloat, AbstractFloat, Int64, AbstractFloat}"><code>cu_rectangle_filter</code></a> or a super-Gaussian function (n=3) low-pass filter <a href="../../reference/#ParticleHolography.cu_super_gaussian_filter-Tuple{AbstractFloat, AbstractFloat, Int64, AbstractFloat}"><code>cu_super_gaussian_filter</code></a> can be used. For determining the cutoff frequency, please refer to the function documentation or the original research papers.</p><h2 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h2><pre><code class="language-julia hljs">using ParticleHolography
using CUDA
using Images

# Load hologram
img = load_gray2float(&quot;./test/holo1.png&quot;)

# Parameters
λ = 0.6328 # Wavelength [μm] 
Δx = 10.0 # Pixel size [μm]
z0 = 80000.0 # Optical distance between the hologram and the front surface of the reconstruction volume [μm]
Δz = 100.0 # Optical distance between the reconstructed slices [μm]
datlen = 1024 # Data length
slices = 1000 # Number of slices

# Prepare the transfer functions
d_sqr = cu_transfer_sqrt_arr(datlen, λ, Δx)
d_tf = cu_transfer(-z0, datlen, λ, d_sqr)
d_slice = cu_transfer(-Δz, datlen, λ, d_sqr)

# Make a wavefront
d_wavefront = cu_gabor_wavefront(img)

# Apply low-pass filter
d_lpf = cu_super_gaussian_filter(z0 + Δz * slices, λ, datlen, Δx)
cu_apply_low_pass_filter!(d_wavefront, d_lpf)

# Reconstruction
d_xyproj = cu_get_reconst_xyprojection(d_wavefront, d_tf, d_slice, slices)</code></pre><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><div class="citation canonical"><dl><dt>[16]</dt><dd><div id="fugal">J. P. Fugal, T. J. Schulz and R. A. Shaw. <a href="https://dx.doi.org/10.1088/0957-0233/20/7/075501"><em>Practical methods for automated reconstruction and characterization of particles in digital in-line holograms</em></a>. <a href="https://doi.org/10.1088/0957-0233/20/7/075501">Measurement Science and Technology <strong>20</strong>, 075501</a> (2009).</div></dd></dl></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../reconstruction/">« Volume reconstruction</a><a class="docs-footer-nextpage" href="../animplot/">Animated plots »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Tuesday 21 January 2025 06:20">Tuesday 21 January 2025</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
