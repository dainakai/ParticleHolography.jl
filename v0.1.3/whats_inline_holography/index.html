<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>What&#39;s inline holography? · ParticleHolography.jl</title><meta name="title" content="What&#39;s inline holography? · ParticleHolography.jl"/><meta property="og:title" content="What&#39;s inline holography? · ParticleHolography.jl"/><meta property="twitter:title" content="What&#39;s inline holography? · ParticleHolography.jl"/><meta name="description" content="Documentation for ParticleHolography.jl."/><meta property="og:description" content="Documentation for ParticleHolography.jl."/><meta property="twitter:description" content="Documentation for ParticleHolography.jl."/><meta property="og:url" content="https://dainakai.github.io/ParticleHolography.jl/whats_inline_holography/"/><meta property="twitter:url" content="https://dainakai.github.io/ParticleHolography.jl/whats_inline_holography/"/><link rel="canonical" href="https://dainakai.github.io/ParticleHolography.jl/whats_inline_holography/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/styles.css" rel="stylesheet" type="text/css"/><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="ParticleHolography.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">ParticleHolography.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>What&#39;s inline holography?</a><ul class="internal"><li><a class="tocitem" href="#introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Collimated-light-propagation"><span>Collimated light propagation</span></a></li><li><a class="tocitem" href="#Hologram-recording-(Computer-generated-holography)"><span>Hologram recording (Computer generated holography)</span></a></li><li><a class="tocitem" href="#gabor_explain"><span>Hologram reconstruction (Gabor holography)</span></a></li><li><a class="tocitem" href="#Twin-image-problem"><span>Twin image problem</span></a></li><li><a class="tocitem" href="#pr_explain"><span>Phase retrieval holography</span></a></li><li><a class="tocitem" href="#References"><span>References</span></a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials/gabor/">Gabor holography</a></li><li><a class="tocitem" href="../tutorials/pr/">Phase retrieval holography</a></li><li><a class="tocitem" href="../tutorials/particle/">Particle handling</a></li></ul></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../usage/preprocessings/">Preprocessings</a></li><li><a class="tocitem" href="../usage/reconstruction/">Volume reconstruction</a></li><li><a class="tocitem" href="../usage/lowpassfilter/">Low-pass filtering</a></li><li><a class="tocitem" href="../usage/animplot/">Animated plots</a></li></ul></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>What&#39;s inline holography?</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>What&#39;s inline holography?</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/dainakai/ParticleHolography.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/dainakai/ParticleHolography.jl/blob/main/docs/src/whats_inline_holography.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Gabor&#39;s-inline-holography"><a class="docs-heading-anchor" href="#Gabor&#39;s-inline-holography">Gabor&#39;s inline holography</a><a id="Gabor&#39;s-inline-holography-1"></a><a class="docs-heading-anchor-permalink" href="#Gabor&#39;s-inline-holography" title="Permalink"></a></h1><h2 id="introduction"><a class="docs-heading-anchor" href="#introduction">Introduction</a><a id="introduction-1"></a><a class="docs-heading-anchor-permalink" href="#introduction" title="Permalink"></a></h2><p>Holography is an imaging and measurement technique first proposed by D. Gabor in 1948 [<a href="#gabor">1</a>]. The interference pattern between the object light, which is diffracted by obstacles such as particles, and a reference light is recorded on a photosensitive material like a film, which is called a hologram. When the hologram is illuminated with a reconstruction light, the original light field is partially reproduced. In the case of small opaque objects like particles, the reconstructed light field is obstructed at the particle positions, appearing as dark images in the reconstruction. This allows the 3D position and shape of the objects to be observed. Currently, photosensitive materials have been replaced by digital cameras, and hologram reconstruction is commonly performed using digital image processing techniques such as numerical light propagation calculations. In an in-line holography setup, the coherent parallel light, the object observation volume, and the camera plane are all arranged along the same axis, eliminating the need to separate the object and reference light, and simplifying the reconstruction calculation. This article explains the light propagation calculation for parallel light, hologram recording and reconstruction, and the phase retrieval method, which is an advanced technique derived from Gabor holography.</p><p><img src="../assets/opticalsetup.png" alt="holography"/></p><h2 id="Collimated-light-propagation"><a class="docs-heading-anchor" href="#Collimated-light-propagation">Collimated light propagation</a><a id="Collimated-light-propagation-1"></a><a class="docs-heading-anchor-permalink" href="#Collimated-light-propagation" title="Permalink"></a></h2><p>The propagation of parallel light follows the Helmholtz equation and can be calculated quickly and accurately using the angular spectrum method [<a href="#goodman">2</a>] [<a href="#kreis">3</a>]. Defining the optical axis of the parallel light as the <span>$z$</span> axis and the plane perpendicular to it as the <span>$xy$</span> plane, the wavefront of the parallel light at <span>$z=z_0$</span> is denoted as <span>$\psi(x, y; z_0)$</span>. The light field propagated by <span>$\Delta z$</span> in the positive <span>$z$</span> direction is given by the following equation:</p><p class="math-container">\[\psi(x,y;z_0 + \Delta z) = \mathcal{F}^{-1}\left\{ \mathcal{F}\{\psi(x,y;z_0)\} \cdot \exp{\left( \frac{\mathrm{j}2\pi \Delta z}{\lambda} \sqrt{1-\left( \lambda \alpha \right)^2 - \left( \lambda \beta \right)^2} \right)} \right\}\]</p><p>Here, <span>$\mathcal{F}$</span> denotes the two-dimensional Fourier transform, <span>$\alpha, \beta$</span> are the Fourier domain variables corresponding to <span>$x,y$</span>, and <span>$\lambda$</span> is the wavelength. This equation shows that by Fourier transforming the wavefront of the parallel light, multiplying it by the transfer function <span>$H_{\Delta z}=\exp{\left( \frac{\mathrm{j}2\pi \Delta z}{\lambda} \sqrt{1-\left( \lambda \alpha \right)^2 - \left( \lambda \beta \right)^2} \right)}$</span>, and then performing an inverse Fourier transform, the light field propagated by <span>$\Delta z$</span> in the positive <span>$z$</span> direction can be obtained.</p><h2 id="Hologram-recording-(Computer-generated-holography)"><a class="docs-heading-anchor" href="#Hologram-recording-(Computer-generated-holography)">Hologram recording (Computer generated holography)</a><a id="Hologram-recording-(Computer-generated-holography)-1"></a><a class="docs-heading-anchor-permalink" href="#Hologram-recording-(Computer-generated-holography)" title="Permalink"></a></h2><p>Holography is a technique for reconstructing 3D images from obtained holograms, but it is also possible to numerically generate holograms by modeling the objects and their arrangements. Generally, an opaque particle with radius <span>$r_0$</span> located at <span>$(x_0,y_0,z_0)$</span> can be treated as a circular disk with zero thickness on the object plane <span>$x_0-y_0$</span> [<a href="#vikram">4</a>]. The object plane <span>$A_0$</span> is represented as follows:</p><p class="math-container">\[A_0(x,y) = \begin{cases}
1 &amp; \text{if} \quad (x-x_0)^2 + (y-y_0)^2 \leq r_0^2 \\
0 &amp; \text{otherwise}
\end{cases}\]</p><p>The diffraction pattern of the particle appears on the hologram as the parallel light is blocked at the points where the object plane has a value of 1. The hologram can be calculated using the following equation:</p><p class="math-container">\[I(x,y; z_0+\Delta z) = \left| \mathcal{F}^{-1}\left\{ \mathcal{F}\{\psi(x,y;z_0)\cdot \left(1-A_0\right)\} \cdot H_{\Delta z} \right\} \right|^2\]</p><p><code>\psi(x,y;z_0)</code> is the wavefront of the parallel light just before passing through the object plane. If no objects exist before this point, the phase at each point can be set to 0, and we can assume <span>$\psi(x,y;z_0)=1$</span>. Even if objects exist before this point, we can calculate the light field propagated from the position of the farthest particle by setting the phase there to 0 and using the same method as in the above equation. Since the hologram is the intensity distribution of the light field, it is represented by the square of the amplitude of the wavefront. The light field is a complex number, so this calculation involves taking the product with its complex conjugate.</p><h2 id="gabor_explain"><a class="docs-heading-anchor" href="#gabor_explain">Hologram reconstruction (Gabor holography)</a><a id="gabor_explain-1"></a><a class="docs-heading-anchor-permalink" href="#gabor_explain" title="Permalink"></a></h2><p>It is possible to reconstruct a hologram by directly propagating the intensity distribution of the light field, which is the hologram, in the negative <span>$z$</span> direction [<a href="#vikram">4</a>]. However, to maintain consistency with the phase retrieval method, which will be explained later, the reconstructed wavefront is taken as the square root of the hologram.</p><p class="math-container">\[\psi(x,y;z_0) = \mathcal{F}^{-1}\left\{ \mathcal{F}\{\sqrt{I(x,y;z_0+\Delta z)}\} \cdot \exp{\left( \frac{-\mathrm{j}2\pi \Delta z}{\lambda} \sqrt{1-\left( \lambda \alpha \right)^2 - \left( \lambda \beta \right)^2} \right)} \right\}\]</p><p>Generally, the particle positions are unknown during reconstruction. By varying the reconstruction distance <span>$-\Delta z$</span> throughout the observation volume, the particle positions within the volume can be determined. In practice, the wavefront is first propagated to the front surface of the observation volume closest to the camera using the transfer function for the distance to this surface. Then, transfer functions with finer reconstruction intervals are generated, and the wavefront is propagated at each interval to create <span>$z$</span>-direction slices of the observation volume. This approach requires the generation of only two transfer functions.</p><h2 id="Twin-image-problem"><a class="docs-heading-anchor" href="#Twin-image-problem">Twin image problem</a><a id="Twin-image-problem-1"></a><a class="docs-heading-anchor-permalink" href="#Twin-image-problem" title="Permalink"></a></h2><p>In the hologram reconstruction equation above, the square root of the hologram is treated as the light field at that point, which naturally leads to the loss of phase information from the hologram. Consequently, the intensity of the reconstructed particle images does not match the values of the transmission function (defined as (1 - object plane)). For more details on these issues, refer to [<a href="#kats">5</a>] and [<a href="#meng">6</a>].</p><p><img src="../assets/gabor.png" alt="gabor reconstruction"/> <em>Gabor reconstruction and its intensity profile</em></p><p>If the phase information of the hologram could be restored to obtain an ideal reconstruction, as shown below, the threshold for particle detection could be lowered, resulting in improved particle detection performance. In the figure below, the restoration of phase information eliminates the conjugate image in the reconstruction, and the profile closely matches the correct transmission function plot.</p><p><img src="../assets/pr.png" alt="phase retrieval"/> <em>Phase retrieved reconstruction and its intensity profile</em></p><p>The method that achieves this is phase retrieval holography [<a href="#liu">7</a>] using the Gerchberg-Saxton algorithm [<a href="#gerchberg">8</a>].</p><h2 id="pr_explain"><a class="docs-heading-anchor" href="#pr_explain">Phase retrieval holography</a><a id="pr_explain-1"></a><a class="docs-heading-anchor-permalink" href="#pr_explain" title="Permalink"></a></h2><p>Phase retrieval holography is a technique for reconstructing the optical wavefront, including phase information, from a pair of simultaneous holograms captured at two points separated by a propagation distance <span>$\Delta z_p$</span> from the object. Let&#39;s denote the hologram closer to the object plane as <span>$I_1$</span> and the other as <span>$I_2$</span>. Using the same indexing, we define the optical wavefront <span>$\psi$</span> and its phase distribution <span>$\phi$</span>. The following iterative operation (Gerchberg-Saxton algorithm) is repeated for the two holograms:</p><h4 id="Initial-condition"><a class="docs-heading-anchor" href="#Initial-condition">Initial condition</a><a id="Initial-condition-1"></a><a class="docs-heading-anchor-permalink" href="#Initial-condition" title="Permalink"></a></h4><p class="math-container">\[\phi_1 = 0, \quad \psi_1 = \sqrt{I_1} \exp{\left( \mathrm{j}\phi_1 \right)}\]</p><h4 id="STEP-1"><a class="docs-heading-anchor" href="#STEP-1">STEP 1</a><a id="STEP-1-1"></a><a class="docs-heading-anchor-permalink" href="#STEP-1" title="Permalink"></a></h4><p class="math-container">\[\psi_2 = \mathcal{F}^{-1}\left\{ \mathcal{F}\{\psi_1\} \cdot H_{\Delta z_p} \right\} \\
\phi_2 = \arg{\left\{ \mathcal{F}\{\psi_2\} \right\}}\]</p><p>The wavefront <span>$\psi_1$</span> is propagated by the hologram separation distance <span>$\Delta z_p$</span> to calculate the wavefront <span>$\psi_2$</span>, and its argument is saved as the phase distribution <span>$\phi_2$</span>.</p><h4 id="STEP-2"><a class="docs-heading-anchor" href="#STEP-2">STEP 2</a><a id="STEP-2-1"></a><a class="docs-heading-anchor-permalink" href="#STEP-2" title="Permalink"></a></h4><p class="math-container">\[\psi_2 = \sqrt{I_2} \exp{\left( \mathrm{j}\phi_2 \right)}\]</p><p>The wavefront <span>$\psi_2$</span> is redefined by the square root of the hologram <span>$I_2$</span> and the phase distribution <span>$\phi_2$</span>.</p><h4 id="STEP-3"><a class="docs-heading-anchor" href="#STEP-3">STEP 3</a><a id="STEP-3-1"></a><a class="docs-heading-anchor-permalink" href="#STEP-3" title="Permalink"></a></h4><p class="math-container">\[\psi_1 = \mathcal{F}^{-1}\left\{ \mathcal{F}\{\psi_2\} \cdot H_{-\Delta z_p} \right\} \\
\phi_1 = \arg{\left\{ \mathcal{F}\{\psi_1\} \right\}}\]</p><p>The wavefront <span>$\psi_2$</span>is back-propagated by the hologram separation distance <span>$\Delta z_p$</span> to calculate the wavefront <span>$\psi_1$</span>, and its argument is saved as the phase distribution <span>$\phi_1$</span>.</p><h4 id="STEP-4"><a class="docs-heading-anchor" href="#STEP-4">STEP 4</a><a id="STEP-4-1"></a><a class="docs-heading-anchor-permalink" href="#STEP-4" title="Permalink"></a></h4><p class="math-container">\[\psi_1 = \sqrt{I_1} \exp{\left( \mathrm{j}\phi_1 \right)}\]</p><p>The wavefront <span>$\psi_1$</span> is redefined by the square root of the hologram <span>$I_1$</span> and the phase distribution <span>$\phi_1$</span>.</p><p>For details such as the number of iterations of the above algorithm and camera arrangement, please refer to the literature such as [<a href="#tanaka">9</a>].</p><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><div class="citation canonical"><dl><dt>[1]</dt><dd><div id="gabor">D. Gabor. <em>A new microscopic principle</em>. <a href="https://doi.org/10.1038/161777a0">Nature <strong>161</strong>, 777–778</a> (1948).</div></dd><dt>[2]</dt><dd><div id="goodman">J. W. Goodman. <em>Introduction to Fourier Optics –3rd ed.</em> (Roberts and Company publishers, 2005); pp. 42–62.</div></dd><dt>[3]</dt><dd><div id="kreis">M. A. T. M. Kreis and W. P. Jüptner. <em>Methods of digital holography: a comparison.</em> <a href="https://doi.org/10.1117/12.281164">In Optical Inspection and Micromeasurements II, SPIE <strong>3098</strong>, 224–233</a> (1997).</div></dd><dt>[4]</dt><dd><div id="vikram">C. S. Vikram. <em>Particle Field Holography</em> (Cambridge University Press, 1992); p. 34.</div></dd><dt>[5]</dt><dd><div id="kats">J. Katz and J. Sheng. <em>Applications of holography in fluid mechanics and particle dynamics</em>. <a href="https://doi.org/10.1146/annurev-fluid-121108-145508">Annual Review of Fluid Mechanics <strong>42</strong>, 531–555</a> (2010).</div></dd><dt>[6]</dt><dd><div id="meng">H. Meng and F. Hussain. <em>In-line recording and off-axis viewing technique for holographic particle velocimetry</em>. <a href="https://doi.org/10.1364/AO.34.001827">Applied Optics <strong>34–11</strong>, 1827–1840</a> (1995).</div></dd><dt>[7]</dt><dd><div id="liu">G. Liu and P. Scott. <em>Phase retrieval and twin-image elimination for in-line Fresnel holograms</em>. <a href="https://doi.org/10.1364/JOSAA.4.000159">Journal of the Optical Society of America A <strong>4–1</strong>, 159–165</a> (1987).</div></dd><dt>[8]</dt><dd><div id="gerchberg">R. W. Gerchberg and W. O. Saxton. <em>A practical algorithm for the determination of phase from image and diffraction plane pictures</em>. Optik <strong>35–2</strong>, 237–246 (1972).</div></dd><dt>[9]</dt><dd><div id="tanaka">Y. Tanaka, S. Tani and S. Murata. <em>Phase retrieval method for digital holography with two cameras in particle measurement</em>. <a href="https://doi.org/10.1364/OE.24.025233">Optics Express <strong>24–22</strong>, 25233–25241</a> (2016).</div></dd></dl></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../tutorials/gabor/">Gabor holography »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Tuesday 21 January 2025 07:10">Tuesday 21 January 2025</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
